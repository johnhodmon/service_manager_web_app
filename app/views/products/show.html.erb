<% provide(:side_content, 'layouts/products')%> 
<div class ="row">
<div class="col-md-6">

<h1>Manufacturer Details<h1>
<p>
<%= @product.manufacturer.name %><br>
<%= @product.manufacturer.street %><br>
<%= @product.manufacturer.town %><br>
<%= @product.manufacturer.county %><br>
<%= @product.manufacturer.country %><br>
<%= @product.manufacturer.phone %><br>
<%= @product.manufacturer.email %><br>
</p>
<h1>Exploded View</h1>
 <%= image_tag("beko_machine.png", alt: "Exploded View") %>

</div>
<div class="col-md-6">
<h1> Product Details </h1>
<p>
<%= @product.manufacturer.name %> <%= @product.product_number %> <br>
<%= @product.description%><br>

<%= link_to "Edit this Product", edit_product_path(@product) %><br>
<%= link_to 'Delete this Product', @product, method: :delete, data: { confirm: 'Are you sure you want to delete this product?' } %>
</p>


<h1> Parts List</h1>
<table>
<thead>
<tr>
<th>Part Number</th>
<th>Part Description</th>
<th>Quantity</th>
</tr>
</thead>
<tbody>

<% @product.parts_contained.each do |part| %>
<% part_list_items=PartList.where(part_id:part.id,product_id:@product.id) %>
<% part_list_item=part_list_items[0] %>
<% quantity=part_list_item.quantity %>

<tr><td><%= link_to part.part_number, part %></td><td><%= part.description %></td>
<td><%= quantity.to_s %> <%= link_to 'Delete',part_list_path(id:part_list_item.id,product_id:@product.id), method: :delete, data: { confirm: 'Are you sure you want to delete this part from the list?' } %></td></tr>


<% end %>
</tbody>
</table>

<h1> Add Part to Parts List</h1>
 <%= form_for(:part_list, url:product_path(product_id:@product.id)) do |f| %>
   		
        <%= f.hidden_field :product_id, :value => @product.id %>
        <div class="form-group">
         <%= f.label :part_id,"Part" %>   
       <%= f.collection_select :part_id,Part.all,:id,:description, include_blank:"Select Part"  %>
       </div>
       <div class="form-group">
           <%= f.label :quantity%>  
         <%= f.select :quantity, (0..10) %>
         <div class="form-group">
 <%= f.submit "Add Part",:class=>'btn btn-primary'%>
 <% end %>
</div>


</div>
</div>

